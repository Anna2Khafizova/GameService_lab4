# Разработка игровых сервисов Лабораторная работа #3
Отчет по лабораторной работе #3 выполнил(а):
- Хафизова Анна Эдуардовна
- РИ300012
Отметка о выполнении заданий (заполняется студентом):

| Задание | Выполнение | Баллы |
| ------ | ------ | ------ |
| Задание 1 | * | 60 |
| Задание 2 | * | 20 |
| Задание 3 | * | 20 |

знак "*" - задание выполнено; знак "#" - задание не выполнено;

Работу проверили:
- к.т.н., доцент Денисов Д.В.
- к.э.н., доцент Панов М.А.
- ст. преп., Фадеев В.О.

[![N|Solid](https://cldup.com/dTxpPi9lDf.thumb.png)](https://nodesource.com/products/nsolid)

[![Build Status](https://travis-ci.org/joemccann/dillinger.svg?branch=master)](https://travis-ci.org/joemccann/dillinger)

Структура отчета

- Данные о работе: название работы, фио, группа, выполненные задания.
- Цель работы.
- Задание 1.
- Код реализации выполнения задания. Визуализация результатов выполнения (если применимо).
- Задание 2.
- Код реализации выполнения задания. Визуализация результатов выполнения (если применимо).
- Задание 3.
- Код реализации выполнения задания. Визуализация результатов выполнения (если применимо).
- Выводы.
- ✨Magic ✨

## Цель работы
Интеграция интерфейса пользователя в разрабатываемое интерактивное приложение.


## Задание 1
### Используя видео-материалы практических работ 1-2 повторить реализацию игровых механик.

Ход работы:

В первой части данной лабораторной работы мы создаём код для перемещения игрового объекта **EnergyShield** вслед за указателем мыши:
```c#
Vector3 mousePos2D = Input.mousePosition;
        mousePos2D.z = -Camera.main.transform.position.z;
        Vector3 mousePos3D = Camera.main.ScreenToWorldPoint(mousePos2D);
        Vector3 pos = this.transform.position;
        pos.x = mousePos3D.x;
        this.transform.position = pos;
```
Перемещение **EnergyShield** вслед за указателем мыши можно увидеть ниже:
![Shield-following-mouse](screenshots/gif1.gif)

Далее мы хотим добавить уничтожение объекта **DragonEgg** при соприкосновении с энергетическим щитом (можно увидеть на gif выше, как яйцо просто отскакивает от щита на данный момент). Для этого добавим новый метод **OnCollisionEnter**:
```c#
void OnCollisionEnter(Collision coll)
    {
        GameObject Collided = coll.gameObject;
        if (Collided.tag == "Dragon Egg"){
            Destroy(Collided);
        }
    }
```
Теперь можно заметить, как падающие яйца уничтожаются при соприкосновении с энергетическим щитом:
![Destroying-eggs-by-touching-shield](screenshots/gif2.gif)

Я создала новый canvas, который в будущем будет отображать счёт пойманных яиц на экране. Немного настроив canvas, можно увидеть слово Score в правом верхнем углу экрана при запуске игры.
![Canvas-right-angle](screenshots/image1.png)

Чтобы счётчик работал, импортируем библиотеку TMPro написав в начале скрипта:
```c#
using TMPro;
```
Добавим переменную и код, который будет при запуске сцены вместо надписи Score будет отображать **0**:

```c#
public TextMeshProUGUI scoreGT;

    void Start() {
        GameObject scoreGO = GameObject.Find("Score");
        scoreGT = scoreGO.GetComponent<TextMeshProUGUI>();
        scoreGT.text = "0";
    }
```
Научим скрипт-файл подсчитывать количество пойманных энергетическим щитом драконьих яиц, для этого в метод **OnCollisionEnter** добавим следующее:
```c#
int score = int.Parse(scoreGT.text);
score += 1;
scoreGT.text = score.ToString();
```
Ниже можно увидеть как при ловле яиц повышается количество очков в правом верхнем углу экрана.
![Score-is-working](screenshots/gif3.gif)





## Задание 2
### Используя видео-материалы практических работ 3-4 повторить реализацию игровых механик.
Напишем метод **DragonEggDestroyed**, в котором при падении яйца на землю здоровье энергетического щита будет уменьшаться на единицу:
```c#
public void DragonEggDestroyed(){
        GameObject[] tDragonEggArray = GameObject.FindGameObjectsWithTag("Dragon Egg");
        foreach (GameObject tGO in tDragonEggArray){
            Destroy(tGO);
        }
        int shieldIndex = shieldList.Count - 1;
        GameObject tShieldGo = shieldList[shieldIndex];
        shieldList.RemoveAt(shieldIndex);
        Destroy(tShieldGo);
    }
```
Ниже можно убедиться, что код работаёт и при не-ловле драконьего яйца энергетический щит уменьшается в размере:
![Less-health-less-shield](screenshots/gif4.gif)

Однако, когда здоровье энергетического щита становится меньше нуля, у нас возникает ошибка выхода за пределы массива. Чтобы исправить её, в метод выше (DragonEggDestroyed) добавим код, который будет перезапускать сцену и сбрасывать счётчик очков, как только здоровье щита станет равным нулю:

```c#
if (shieldList.Count == 0){
    SceneManager.LoadScene("_0scene");
}
```

Далее я скачала asset pack **Autumn Mountain** для добавления префаба и текстур горы и окружающего неба. На скриншоте ниже можно заметить новое окружение у дракона:
![Beautiful-world](screenshots/image2.PNG)

После чего, следуя инструкциям по видео, я создала несколько папок для структуирования исходных файлов в проекте. 

Также я узнала, что благодаря добавлению нижнего подчеркивания перед именем папки, сама папка повышается вверх в списке иерархии, что очень удобно.

На скриншоте ниже можно заметить, как беспорядок в одной папке был распределён в порядок по разным папкам, после чего все больше не нужные ассеты были удалены.
![Beautiful-world](screenshots/image3.PNG)


## Задание 3
### 	Используя видео-материалы практической работы 5 повторить реализацию игровых механик.
Для дальнейшей работы я скачала и импортировала плагин PluginYG и добавила на каждую сцену объект YandexGame.

Проект уже с предыдущей практики у меня был настроен на WebGL, однако в этот раз, благодаря плагину-помощнику, процесс был заметно легче и быстрее.
![WebGL-scene](screenshots/image4.PNG)
Чтобы проверить корректность работы плагина и билда, зайдём в index.html файл и увидим там следующие строчки:
```c#
<!-- Yandex Games SDK -->
    <script src="https://yandex.ru/games/sdk/v2"></script>
```
Именно они и значат, что подключение к Yandex SDK прошло успешно.

Далее я конвертировала Яндекс Билд в архив с расширением zip и выгрузила его на сайт для разработчиков игр Яндекс. Спустя время файл прошёл проверку и теперь любой желающий может сыграть в черновик игры по ссылке: https://yandex.ru/games/app/198307?draft=true&lang=ru.
## Выводы

В ходе лабораторной работы я создала графический интерфейс счётчика благодаря методу Collide и скачала ещё один asset для создания более красивого фона игры. Также я научилась структуированию исходных файлов в папке и загрузила тестовую версию игры на платформу Яндекса, в которую теперь могут играть имеющие доступ к ссылке люди. Дополнительно оказалось полезным знание, что благодаря добавлению нижнего подчеркивания перед именем папки, сама папка повышается вверх в списке иерархии, что очень удобно для разного структуирования.

✨Magic ✨

| Plugin | README |
| ------ | ------ |
| GitHub | [https://github.com/Den1sovDm1triy/DA-in-GameDev-lab1] |



## Powered by

**BigDigital Team: Denisov | Fadeev | Panov**
